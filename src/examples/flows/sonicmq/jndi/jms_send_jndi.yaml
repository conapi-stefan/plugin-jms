id: jms_send_jndi
namespace: at.conapi

tasks:
  - id: hello
    type: io.kestra.plugin.core.log.Log
    message: Hello World! ðŸš€

  - id: jms-send
    type: io.kestra.plugin.jms.JMSProducer
    connectionFactoryConfig:
      type: JNDI
      # Enable FilteredClassLoader for SonicMQ which bundles javax.jms classes in its JAR
      useFilteredClassLoader: true
      jndiConnectionFactoryName: myCF
      jndiInitialContextFactory: com.sonicsw.jndi.mfcontext.MFContextFactory
      jndiProviderUrl: tcp://host.docker.internal:2506
      connectionProperties:
        com.sonicsw.jndi.mfcontext.domain: Domain1
        java.naming.security.principal: Administrator
        java.naming.security.credentials: Administrator
    destination:
      destinationName: SampleQ1
      destinationType: QUEUE
    from: Hello JNDI
